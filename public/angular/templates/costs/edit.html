<div class="jumbotron" data-pages="parallax">
  <div class="container-fluid container-fixed-lg sm-p-l-20 sm-p-r-20">
    <div class="inner">
      <ul class="breadcrumb">
        <li>
          <p>Curve</p>
        </li>
        <li><a href="/#/costs">Costs</a></li>
        <li ng-show="!cost._id"><a href="" class="active">Create</a></li>
        <li ng-show="cost._id"><a href="/#/costs/{{cost._id}}/edit" class="active">{{cost.name}}</a></li>
      </ul>
    </div>
  </div>
</div> 
<!-- Main Container -->
<div class="container-fluid container-fixed-lg">
  <div class="row">
    <div class="col-xs-12 text-right">
      <button class="btn btn-danger" data-toggle="modal" data-target="#deleteModal"><i class="fa fa-trash"></i>&nbsp;Delete</button>
      <button class="btn btn-complete pull-right" ng-click="save()">Save</button>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12 col-sm-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="panel-title">
            Overview 
          </div>
        </div> 
        <div class="panel-body p-t-15">
          <div class="form-group required">
            <label>Name</label>
            <input type="text" class="form-control" ng-model="cost.name" required>
          </div>
          <div class="form-group required">
            <label>Amount</label>
            <input type="text" class="form-control" ng-model="cost.amount" required>
          </div>
          <div class="form-group required">
            <label>Type</label>
            <ui-select ng-model="cost.type">
              <ui-select-match>
                <span ng-bind="$select.selected"></span>
              </ui-select-match>
              <ui-select-choices repeat="item in costsTypes">
                <span ng-bind="item"></span>
              </ui-select-choices>
            </ui-select>
          </div>
          <div class="form-group">
            <label>Territory</label>
            <ui-select ng-model="cost.territory">
              <ui-select-match>
                  <span ng-bind="$select.selected.name"></span>
              </ui-select-match>
              <ui-select-choices group-by="groupFind" repeat="territory.code as territory in territories | filter: $select.search">
                  <span class="country" ng-bind="territory.name"></span>
              </ui-select-choices>
            </ui-select>
          </div>
          <div class="form-group required">
            <label>Invoice No.</label>
            <input type="text" class="form-control" ng-model="cost.invoiceNo" required>
          </div>
          <div class="form-group required">
            <label>Description</label>
            <input type="text" class="form-control" ng-model="cost.description" required>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-sm-6">
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="panel-title">
            File 
          </div>
        </div> 
        <div class="panel-body p-t-15">
          <div class="form-group required">
            <input type="file" class="form-control" ng-model="file" ngf-select ngf-allow-dir="false" ngf-change="upload($file)">
            <a class="file-image" ng-show="cost.publicLink" target="_blank" href="{{cost.publicLink}}">
              <div>
              </div>
            </a>
          </div>
        </div>
      </div>
      <div class="panel panel-default">
        <div class="panel-heading">
          <div class="panel-title">
            Mapping
          </div>
        </div>
        <div class="panel-body">
          <form role="form">
            <div class="form-group required">
              <label>Release</label>
              <ui-select multiple ng-model="cost.releaseIds" theme="bootstrap" ng-disabled="false">
                <ui-select-match placeholder="Select releases...">
                  <span style="vertical-align:middle;">{{$item.title}}</span>
                  <span ng-bind="$select.selected.title"></span>
                </ui-select-match>
                <ui-select-choices repeat="item._id as item in releases | filter:$select.search">
                  <div>
                    <div class="clear">
                      <div ng-bind-html="item.title | highlight: $select.search"></div>
                    </div>
                  </div>
                </ui-select-choices>
              </ui-select>
            </div>
            <div class="form-group required">
              <label>Track</label>
              <!-- <input type="text" ng-model="cost.track" class="form-control"> -->
              <ui-select multiple ng-model="cost.trackIds" theme="bootstrap" ng-disabled="false">
                <ui-select-match placeholder="Select tracks...">
                  <span style="vertical-align:middle;">{{$item.title}}</span>
                  <span ng-bind="$select.selected.title"></span>
                </ui-select-match>
                <ui-select-choices repeat="item._id as item in tracks | filter:$select.search">
                  <div>
                    <div class="clear">
                      <div ng-bind-html="item.title | highlight: $select.search"></div>
                    </div>
                  </div>
                </ui-select-choices>
              </ui-select>
            </div>
            <div class="form-group required">
              <label>Work</label>
              <!-- <input type="text" ng-model="cost.work" class="form-control"> -->
              <ui-select multiple ng-model="cost.workIds" theme="bootstrap" ng-disabled="false">
                <ui-select-match placeholder="Select works...">
                  <span style="vertical-align:middle;"">{{$item.title}}</span>
                  <span ng-bind="$select.selected.title"></span>
                </ui-select-match>
                <ui-select-choices repeat="item._id as item in works | filter:$select.search">
                  <div>
                    <div class="clear">
                      <div ng-bind-html="item.title | highlight: $select.search"></div>
                    </div>
                  </div>
                </ui-select-choices>
              </ui-select>
            </div>
            <div class="form-group required">
              <label>Contract</label>
              <!-- <input type="text" ng-model="cost.contract" class="form-control"> -->
              <ui-select multiple ng-model="cost.contractIds" theme="bootstrap" ng-disabled="false">
                <ui-select-match placeholder="Select contracts...">
                  <span style="vertical-align:middle;">{{$item.name}}</span>
                  <span ng-bind="$select.selected.name"></span>
                </ui-select-match>
                <ui-select-choices repeat="item._id as item in contracts | filter:$select.search">
                  <div>
                    <div class="clear">
                      <div ng-bind-html="item.name | highlight: $select.search"></div>
                    </div>
                  </div>
                </ui-select-choices>
              </ui-select>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade stick-up" id="deleteModal" tabindex="-1" role="dialog" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header clearfix text-left">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"><i class="pg-close fs-14"></i>
        </button>
        <h5>Delete Cost</h5>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-xs-12 m-t-20">
            <p>Are you sure you want to delete this cost?  This cannot be undone.</p>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 m-t-20 text-right">
            <button type="button" class="btn btn-default m-t-5" data-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-danger m-t-5" ng-click="delete()"><i class="fa fa-trash"></i>&nbsp;Delete</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>